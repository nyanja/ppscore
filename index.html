<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ping Pong Score Counter</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-user-select: none;
            -webkit-touch-callout: none;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: black;
            color: white;
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .header {
            height: 80px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            border-bottom: 2px solid #555;
        }

        .btn {
            background: transparent;
            border: none;
            color: white;
            width: 60px;
            height: 60px;
            text-align: center;
            text-decoration: none;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            font-size: 48px;
            cursor: pointer;
        }

        .game-area {
            flex: 1;
            display: flex;
        }

        .player-side {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            position: relative;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .player-side.serving {
            box-shadow: inset 0 0 0 8px #ff9000;
        }


        .score {
            font-size: 17rem;
            font-weight: bold;
        }

        .serving-indicator {
            position: absolute;
            bottom: 20px;
            font-size: 1.5rem;
            color: #ff9800;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .player-side.serving .serving-indicator {
            opacity: 1;
        }

        .player-side.right {
            background-color: white;
            color: black;
        }

        .player-side.right .serving-indicator {
            color: #ff9800;
        }


        @media (max-height: 500px) {
            .header {
                height: 60px;
            }
            .serving-indicator {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <button class="btn" onclick="restartMatch()">üîÑ</button>
        <button class="btn" onclick="changeServing()">‚ÜîÔ∏è</button>
    </div>

    <div class="game-area">
                <div class="player-side left" id="player1"
             onclick="handleInput('player1', event)"
             ontouchstart="handleTouch('player1', event)">
            <div class="score" id="score1">0</div>
            <div class="serving-indicator">SERVING</div>
        </div>

        <div class="player-side right" id="player2"
             onclick="handleInput('player2', event)"
             ontouchstart="handleTouch('player2', event)">
            <div class="score" id="score2">0</div>
            <div class="serving-indicator">SERVING</div>
        </div>
    </div>

    <script>
        let scores = { player1: 0, player2: 0 };
        let serving = 'player1';
        let totalPoints = 0;
        let touchStartY = 0;

        // Randomly assign serving player at start
        function initializeGame() {
            serving = Math.random() < 0.5 ? 'player1' : 'player2';
            updateDisplay();
        }

        function updateDisplay() {
            document.getElementById('score1').textContent = scores.player1;
            document.getElementById('score2').textContent = scores.player2;

            // Update serving indicator
            document.getElementById('player1').classList.toggle('serving', serving === 'player1');
            document.getElementById('player2').classList.toggle('serving', serving === 'player2');
        }

        function addPoint(player) {
            scores[player]++;
            totalPoints++;

            // Change serving every 5 points
            if (totalPoints % 5 === 0) {
                serving = serving === 'player1' ? 'player2' : 'player1';
            }

            updateDisplay();
        }

        function subtractPoint(player) {
            if (scores[player] > 0) {
                scores[player]--;
                totalPoints--;

                // Recalculate serving based on total points
                const servingChanges = Math.floor(totalPoints / 5);
                serving = servingChanges % 2 === 0 ?
                    (Math.random() < 0.5 ? 'player1' : 'player2') :
                    (serving === 'player1' ? 'player2' : 'player1');

                updateDisplay();
            }
        }

                function handleInput(player, event) {
            event.preventDefault();

            // Determine if click is in top or bottom half
            const rect = event.target.closest('.player-side').getBoundingClientRect();
            const clickY = event.clientY;
            const elementMiddle = rect.top + rect.height / 2;

            if (clickY < elementMiddle) {
                // Top half - add point
                addPoint(player);
            } else {
                // Bottom half - subtract point
                subtractPoint(player);
            }
        }

        function handleTouch(player, event) {
            event.preventDefault();
            const touch = event.touches[0];
            touchStartY = touch.clientY;

            // Add touch end listener
            const element = document.getElementById(player);

            function handleTouchEnd(endEvent) {
                endEvent.preventDefault();
                const touchEndY = endEvent.changedTouches[0].clientY;
                const deltaY = touchStartY - touchEndY;

                if (Math.abs(deltaY) > 30) { // Minimum swipe distance
                    if (deltaY > 0) {
                        // Swipe up - add point
                        addPoint(player);
                    } else {
                        // Swipe down - subtract point
                        subtractPoint(player);
                    }
                } else {
                    // Tap - add point
                    addPoint(player);
                }

                element.removeEventListener('touchend', handleTouchEnd);
            }

            element.addEventListener('touchend', handleTouchEnd);
        }



        function restartMatch() {
            scores = { player1: 0, player2: 0 };
            totalPoints = 0;
            serving = Math.random() < 0.5 ? 'player1' : 'player2';
            updateDisplay();
        }

        function changeServing() {
            serving = serving === 'player1' ? 'player2' : 'player1';
            updateDisplay();
        }

        // Prevent scrolling and zooming on mobile
        document.addEventListener('touchmove', (e) => {
            e.preventDefault();
        }, { passive: false });

        document.addEventListener('gesturestart', (e) => {
            e.preventDefault();
        });

        // Initialize the game
        initializeGame();
    </script>
</body>
</html>
